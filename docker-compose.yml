services:
  network-manager:
    build:
      context: ./frontend
    image: nginx-react-frontend
    container_name: NetworkManager
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./NetworkManager/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./NetworkManager/nginx/certs:/etc/nginx/certs:ro

  springboot-app:
    image: openjdk:24-slim-bookworm
    container_name: auth-java-component
    build:
      context: ./auth-java-component
    env_file:
      - ./auth-java-component/.env      
    ports:
      - "8080:8080"
  db:
    container_name: PostgreSQL-db
    ports:
      - 5432:5432
    image: postgres:16.9-alpine3.21 
    restart: unless-stopped
    env_file:
      - ./dbPostgres/.env
    volumes:
      - ./dbPostgres:/var/lib/postgresql/

  mongodb:
    image: mongo:8.0.9-noble
    container_name: mongo_db
    ports:
      - "27017:27017" 
    env_file:
      - ./dbMongo/.env
    volumes:
      - dbMongo-data:/data/db

  residence-creator-ms:
    image: node:23.11.1-alpine3.21
    container_name: ResidenceCreator-ms
    build:
      context: ./ResidenceCreator-ms 
    ports:
      - "3001:3001"
    depends_on:
      - mongodb
    env_file:
      - ./ResidenceCreator-ms/.env